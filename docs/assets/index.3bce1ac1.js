import{o as a,c as i,a as r,t as l,b as $,d as P,r as h,w as v,v as O,e as w,F as m,f as b,g as _,h as p,i as C,j as x}from"./vendor.1f8c782a.js";const k=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}};k();var g=(e,t)=>{for(const[o,d]of t)e[o]=d;return e};const F={name:"Header",computed:{numberOfPosts(){return this.$store.getters.getNumberOfPosts}}},L=$('<div class="logo"><div class="logo__dot"></div><div class="logo__dot"></div><div class="logo__dot"></div></div><p class="title">Newsfeed</p>',2),N={class:"subtitle"};function j(e,t,o,d,n,s){return a(),i("header",null,[L,r("p",N,"We have found "+l(s.numberOfPosts)+" news for you to read.",1)])}var B=g(F,[["render",j]]);const I={name:"Post",props:{post:Object,index:Number,showFullPostBody:!1},computed:{user(){return this.$store.getters.getUser(this.post.userId)}},methods:{deletePost(e){this.$store.commit("deletePost",e)}}},U={class:"post"},S={class:"post__button"},A=r("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M7.0157 5.7705L5.2367 3.9925L7.0147 2.2145C7.3567 1.8735 7.3567 1.3185 7.0147 0.977501C6.6727 0.633501 6.1197 0.634501 5.7777 0.976501L3.9987 2.7545L2.2197 0.974501C1.8777 0.632501 1.3237 0.634501 0.981702 0.974501C0.640702 1.3165 0.640702 1.8715 0.981702 2.2125L2.7617 3.9925L0.985702 5.7675C0.643702 6.1095 0.643702 6.6645 0.985702 7.0045C1.1567 7.1765 1.3797 7.2615 1.6037 7.2615C1.8287 7.2615 2.0517 7.1765 2.2227 7.0055L3.9987 5.2295L5.7787 7.0085C5.9497 7.1795 6.1727 7.2645 6.3967 7.2645C6.6207 7.2645 6.8447 7.1785 7.0157 7.0085C7.3577 6.6665 7.3577 6.1125 7.0157 5.7705",fill:"white"})],-1),M=[A],V={class:"post__content"},H={class:"post__content__title"},E={class:"post__content__name"},z={class:"post__content__body"},D=r("svg",{width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M8.99989 3.99995L1 3.99995",stroke:"#F43F5E","stroke-linecap":"round","stroke-linejoin":"round"}),r("path",{d:"M5.77336 0.786982L8.99999 3.99974L5.77336 7.21303",stroke:"#F43F5E","stroke-linecap":"round","stroke-linejoin":"round"})],-1);function T(e,t,o,d,n,s){var u;return a(),i("div",U,[r("div",S,[r("button",{onClick:t[0]||(t[0]=c=>s.deletePost(o.post.id))},M)]),r("div",V,[r("p",H,l(o.post.title),1),r("p",E,"by "+l((u=s.user)==null?void 0:u.name),1),r("p",z,l(o.showFullPostBody?o.post.body:o.post.body.substring(0,100)+"..."),1),r("button",{class:"post__content__button",onClick:t[1]||(t[1]=c=>o.showFullPostBody=!o.showFullPostBody)},[D,P(" "+l(o.showFullPostBody?"Show less":"Show more"),1)])])])}var q=g(I,[["render",T]]);const G={name:"Posts",components:{Post:q},data(){return{search:"",author:0}},computed:{posts(){let e=this.$store.getters.getPosts.filter(o=>o.title.toLowerCase().includes(this.search.toLowerCase())||o.body.includes(this.search.toLowerCase()));return this.author&&(e=e.filter(o=>o.userId===this.author)),this.$store.commit("setNumberOfPosts",e.length),this.$store.commit("setNumberOfPages"),e.slice(this.$store.getters.getFirstPostIndex,this.$store.getters.getLastPostIndex)},users(){return this.$store.getters.getUsers}},watch:{filter:function(e,t){this.$store.commit("setCurrentPage",1)},author:function(e,t){this.$store.commit("setCurrentPage",1)}}},K={class:"filters"},W={class:"filters__input"},Z=r("label",{for:"search"},"Search",-1),J={class:"filters__input"},Q=r("label",{for:"author"},"Author",-1),R=r("option",{value:0},null,-1),X=["value"],Y={class:"posts"},ee={key:0,class:"nothing"};function te(e,t,o,d,n,s){const u=h("Post");return a(),i(m,null,[r("div",K,[r("div",W,[Z,v(r("input",{id:"search",type:"text","onUpdate:modelValue":t[0]||(t[0]=c=>n.search=c),placeholder:"Search..."},null,512),[[O,n.search]])]),r("div",J,[Q,v(r("select",{id:"author","onUpdate:modelValue":t[1]||(t[1]=c=>n.author=c)},[R,(a(!0),i(m,null,b(s.users,c=>(a(),i("option",{key:c.id,value:c.id},l(c.name),9,X))),128))],512),[[w,n.author]])])]),r("ul",Y,[(a(!0),i(m,null,b(s.posts,(c,f)=>(a(),i("li",{key:c.id},[p(u,{post:c,index:f},null,8,["post","index"])]))),128)),s.posts.length===0?(a(),i("li",ee,"Nothing to find here.")):_("",!0)])],64)}var se=g(G,[["render",te]]);const oe={name:"Pagination",computed:{numberOfPosts(){return this.$store.getters.getNumberOfPosts},numberOfPages(){return this.$store.getters.getNumberOfPages},currentPage(){return this.$store.getters.getCurrentPage}},methods:{setCurrentPage(e){e>0&&e<=this.numberOfPages&&this.$store.commit("setCurrentPage",e)}}},re={key:0,class:"pagination"},ne={key:0},ae={key:1},ie={key:2},ue={class:"pagination__button active"},ce={key:3},de={key:4},le={key:5};function _e(e,t,o,d,n,s){return s.numberOfPosts>0?(a(),i("ul",re,[s.currentPage>2?(a(),i("li",ne,[r("button",{class:"pagination__button",onClick:t[0]||(t[0]=u=>s.setCurrentPage(1))},"1")])):_("",!0),s.currentPage>2?(a(),i("li",ae,"...")):_("",!0),s.currentPage>1?(a(),i("li",ie,[r("button",{class:"pagination__button",onClick:t[1]||(t[1]=u=>s.setCurrentPage(s.currentPage-1))},l(s.currentPage-1),1)])):_("",!0),r("li",null,[r("button",ue,l(s.currentPage),1)]),s.currentPage<s.numberOfPages?(a(),i("li",ce,[r("button",{class:"pagination__button",onClick:t[2]||(t[2]=u=>s.setCurrentPage(s.currentPage+1))},l(s.currentPage+1),1)])):_("",!0),s.currentPage<s.numberOfPages-1?(a(),i("li",de,"...")):_("",!0),s.currentPage<s.numberOfPages-1?(a(),i("li",le,[r("button",{class:"pagination__button",onClick:t[3]||(t[3]=u=>s.setCurrentPage(s.numberOfPages))},l(s.numberOfPages),1)])):_("",!0)])):_("",!0)}var ge=g(oe,[["render",_e]]);const he={name:"Footer"},pe=r("p",null,[P("Zadanie rekrutacyjne, "),r("a",{href:"https://github.com/krzysztofpiotrmusial/vue-fetch",target:"__blank"},"GitHub"),P(".")],-1),fe=[pe];function Pe(e,t,o,d,n,s){return a(),i("footer",null,fe)}var me=g(he,[["render",Pe]]);const ve={components:{Header:B,Posts:se,Pagination:ge,Footer:me},mounted(){this.$store.dispatch("fetchPosts"),this.$store.dispatch("fetchUsers")},computed:{numberOfPosts(){return this.$store.getters.getNumberOfPosts}}};function be(e,t,o,d,n,s){const u=h("Header"),c=h("Posts"),f=h("Pagination"),y=h("Footer");return a(),i("main",null,[p(u),p(c),p(f),p(y)])}var ye=g(ve,[["render",be]]);const $e=C({state(){return{posts:[],users:[],pagination:{numberOfPosts:void 0,postsPerPage:10,numberOfPages:void 0,currentPage:1}}},mutations:{addPosts(e,t){e.posts=t},addUsers(e,t){e.users=t},deletePost(e,t){const o=e.posts.findIndex(d=>d.id===t);e.posts.splice(o,1)},setNumberOfPosts(e,t){e.pagination.numberOfPosts=t},setNumberOfPages(e){e.pagination.numberOfPages=Math.ceil(e.pagination.numberOfPosts/e.pagination.postsPerPage)},setCurrentPage(e,t){e.pagination.currentPage=t}},actions:{async fetchPosts(e){const t=await fetch("https://jsonplaceholder.typicode.com/posts").then(o=>o.json());e.commit("addPosts",t)},async fetchUsers(e){const t=await fetch("https://jsonplaceholder.typicode.com/users").then(o=>o.json());e.commit("addUsers",t)}},getters:{getPosts:e=>e.posts,getUsers:e=>e.users,getUser:e=>t=>e.users.find(o=>o.id===t),getNumberOfPosts:e=>e.pagination.numberOfPosts,getPostsPerPage:e=>e.pagination.postsPerPage,getNumberOfPages:e=>e.pagination.numberOfPages,getCurrentPage:e=>e.pagination.currentPage,getFirstPostIndex:e=>e.pagination.currentPage*e.pagination.postsPerPage-e.pagination.postsPerPage,getLastPostIndex:(e,t)=>t.getFirstPostIndex+e.pagination.postsPerPage}});x(ye).use($e).mount("#app");
