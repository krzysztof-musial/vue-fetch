import{o as i,c as a,a as n,t as d,b,d as m,r as f,w as y,v as $,F as h,e as O,f as _,g as p,h as w,i as C}from"./vendor.3a831d0e.js";const x=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&c(u)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}};x();var g=(e,t)=>{for(const[o,c]of t)e[o]=c;return e};const k={name:"Header",computed:{numberOfPosts(){return this.$store.getters.getNumberOfPosts}}},L=b('<div class="logo"><div class="logo__dot"></div><div class="logo__dot"></div><div class="logo__dot"></div></div><p class="title">Newsfeed</p>',2),F={class:"subtitle"};function N(e,t,o,c,r,s){return i(),a("header",null,[L,n("p",F,"We have found "+d(s.numberOfPosts)+" news for you to read.",1)])}var B=g(k,[["render",N]]);const j={name:"Post",props:{post:Object,index:Number,showFullPostBody:!1},computed:{user(){return this.$store.getters.getUser(this.post.userId)}},methods:{deletePost(e){this.$store.commit("deletePost",e)}}},I={class:"post"},S={class:"post__button"},U=n("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M7.0157 5.7705L5.2367 3.9925L7.0147 2.2145C7.3567 1.8735 7.3567 1.3185 7.0147 0.977501C6.6727 0.633501 6.1197 0.634501 5.7777 0.976501L3.9987 2.7545L2.2197 0.974501C1.8777 0.632501 1.3237 0.634501 0.981702 0.974501C0.640702 1.3165 0.640702 1.8715 0.981702 2.2125L2.7617 3.9925L0.985702 5.7675C0.643702 6.1095 0.643702 6.6645 0.985702 7.0045C1.1567 7.1765 1.3797 7.2615 1.6037 7.2615C1.8287 7.2615 2.0517 7.1765 2.2227 7.0055L3.9987 5.2295L5.7787 7.0085C5.9497 7.1795 6.1727 7.2645 6.3967 7.2645C6.6207 7.2645 6.8447 7.1785 7.0157 7.0085C7.3577 6.6665 7.3577 6.1125 7.0157 5.7705",fill:"white"})],-1),H=[U],M={class:"post__content"},V={class:"post__content__title"},A={class:"post__content__name"},z={class:"post__content__body"},D=n("svg",{width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M8.99989 3.99995L1 3.99995",stroke:"#6366F1","stroke-linecap":"round","stroke-linejoin":"round"}),n("path",{d:"M5.77336 0.786982L8.99999 3.99974L5.77336 7.21303",stroke:"#6366F1","stroke-linecap":"round","stroke-linejoin":"round"})],-1);function E(e,t,o,c,r,s){var u;return i(),a("div",I,[n("div",S,[n("button",{onClick:t[0]||(t[0]=l=>s.deletePost(o.post.id))},H)]),n("div",M,[n("p",V,d(o.post.title),1),n("p",A,"by "+d((u=s.user)==null?void 0:u.name),1),n("p",z,d(o.showFullPostBody?o.post.body:o.post.body.substring(0,100)+"..."),1),n("button",{class:"post__content__button",onClick:t[1]||(t[1]=l=>o.showFullPostBody=!o.showFullPostBody)},[D,m(" "+d(o.showFullPostBody?"Show less":"Show more"),1)])])])}var T=g(j,[["render",E]]);const q={name:"Posts",components:{Post:T},data(){return{filter:""}},computed:{posts(){const e=this.$store.getters.getPosts.filter(o=>o.title.toLowerCase().includes(this.filter.toLowerCase())||o.body.includes(this.filter.toLowerCase()));return this.$store.commit("setNumberOfPosts",e.length),this.$store.commit("setNumberOfPages"),e.slice(this.$store.getters.getFirstPostIndex,this.$store.getters.getLastPostIndex)}},watch:{filter:function(e,t){this.$store.commit("setCurrentPage",1)}}},G={class:"filters"},K={class:"filters__input"},W=n("label",{for:"search"},"Search",-1),Z={class:"posts"},J={key:0,class:"nothing"};function Q(e,t,o,c,r,s){const u=f("Post");return i(),a(h,null,[n("div",G,[n("div",K,[W,y(n("input",{id:"search",type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>r.filter=l),placeholder:"Search..."},null,512),[[$,r.filter]])])]),n("ul",Z,[(i(!0),a(h,null,O(s.posts,(l,P)=>(i(),a("li",{key:l.id},[p(u,{post:l,index:P},null,8,["post","index"])]))),128)),s.posts.length===0?(i(),a("li",J,"Nothing to find here.")):_("",!0)])],64)}var R=g(q,[["render",Q]]);const X={name:"Pagination",computed:{numberOfPosts(){return this.$store.getters.getNumberOfPosts},numberOfPages(){return this.$store.getters.getNumberOfPages},currentPage(){return this.$store.getters.getCurrentPage}},methods:{setCurrentPage(e){e>0&&e<=this.numberOfPages&&this.$store.commit("setCurrentPage",e)}}},Y={key:0,class:"pagination"},ee={key:0},te={key:1},se={key:2},oe={class:"pagination__button active"},ne={key:3},re={key:4},ie={key:5};function ae(e,t,o,c,r,s){return s.numberOfPosts>0?(i(),a("ul",Y,[s.currentPage>2?(i(),a("li",ee,[n("button",{class:"pagination__button",onClick:t[0]||(t[0]=u=>s.setCurrentPage(1))},"1")])):_("",!0),s.currentPage>2?(i(),a("li",te,"...")):_("",!0),s.currentPage>1?(i(),a("li",se,[n("button",{class:"pagination__button",onClick:t[1]||(t[1]=u=>s.setCurrentPage(s.currentPage-1))},d(s.currentPage-1),1)])):_("",!0),n("li",null,[n("button",oe,d(s.currentPage),1)]),s.currentPage<s.numberOfPages?(i(),a("li",ne,[n("button",{class:"pagination__button",onClick:t[2]||(t[2]=u=>s.setCurrentPage(s.currentPage+1))},d(s.currentPage+1),1)])):_("",!0),s.currentPage<s.numberOfPages-1?(i(),a("li",re,"...")):_("",!0),s.currentPage<s.numberOfPages-1?(i(),a("li",ie,[n("button",{class:"pagination__button",onClick:t[3]||(t[3]=u=>s.setCurrentPage(s.numberOfPages))},d(s.numberOfPages),1)])):_("",!0)])):_("",!0)}var ue=g(X,[["render",ae]]);const ce={name:"Footer"},de=n("p",null,[m("Zadanie rekrutacyjne, "),n("a",{href:"https://github.com/krzysztofpiotrmusial/vue-fetch"},"GitHub"),m(".")],-1),le=[de];function _e(e,t,o,c,r,s){return i(),a("footer",null,le)}var ge=g(ce,[["render",_e]]);const fe={components:{Header:B,Posts:R,Pagination:ue,Footer:ge},mounted(){this.$store.dispatch("fetchPosts"),this.$store.dispatch("fetchUsers")},computed:{numberOfPosts(){return this.$store.getters.getNumberOfPosts}}};function pe(e,t,o,c,r,s){const u=f("Header"),l=f("Posts"),P=f("Pagination"),v=f("Footer");return i(),a("main",null,[p(u),p(l),p(P),p(v)])}var Pe=g(fe,[["render",pe]]);const me=w({state(){return{posts:[],users:[],pagination:{numberOfPosts:void 0,postsPerPage:10,numberOfPages:void 0,currentPage:1}}},mutations:{addPosts(e,t){e.posts=t},addUsers(e,t){e.users=t},deletePost(e,t){const o=e.posts.findIndex(c=>c.id===t);e.posts.splice(o,1)},setNumberOfPosts(e,t){e.pagination.numberOfPosts=t},setNumberOfPages(e){e.pagination.numberOfPages=Math.ceil(e.pagination.numberOfPosts/e.pagination.postsPerPage)},setCurrentPage(e,t){e.pagination.currentPage=t}},actions:{async fetchPosts(e){const t=await fetch("https://jsonplaceholder.typicode.com/posts").then(o=>o.json());e.commit("addPosts",t)},async fetchUsers(e){const t=await fetch("https://jsonplaceholder.typicode.com/users").then(o=>o.json());e.commit("addUsers",t)}},getters:{getPosts:e=>e.posts,getUser:e=>t=>e.users.find(o=>o.id===t),getNumberOfPosts:e=>e.pagination.numberOfPosts,getPostsPerPage:e=>e.pagination.postsPerPage,getNumberOfPages:e=>e.pagination.numberOfPages,getCurrentPage:e=>e.pagination.currentPage,getFirstPostIndex:e=>e.pagination.currentPage*e.pagination.postsPerPage-e.pagination.postsPerPage,getLastPostIndex:(e,t)=>t.getFirstPostIndex+e.pagination.postsPerPage}});C(Pe).use(me).mount("#app");
